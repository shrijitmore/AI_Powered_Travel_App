{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"@babel/runtime/helpers/objectWithoutPropertiesLoose","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"HFkXuFcBAqfzGtqyPj8g62MKT0M=","exportNames":["*"]}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":52},"end":{"line":5,"column":65,"index":117}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  // Copyright Â© 2024 650 Industries.\n\n  'use client';\n\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.createPermissionHook = createPermissionHook;\n  var _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n  var _react = require(_dependencyMap[2], \"react\");\n  const _excluded = [\"get\", \"request\"];\n  // These types are identical, but improves the readability for suggestions in editors\n\n  /**\n   * Get or request permission for protected functionality within the app.\n   * It uses separate permission requesters to interact with a single permission.\n   * By default, the hook will only retrieve the permission status.\n   */\n  function usePermission(methods, options) {\n    const isMounted = (0, _react.useRef)(true);\n    const [status, setStatus] = (0, _react.useState)(null);\n    const _ref = options || {},\n      {\n        get = true,\n        request = false\n      } = _ref,\n      permissionOptions = (0, _objectWithoutPropertiesLoose2.default)(_ref, _excluded);\n    const getPermission = (0, _react.useCallback)(async () => {\n      const response = await methods.getMethod(Object.keys(permissionOptions).length > 0 ? permissionOptions : undefined);\n      if (isMounted.current) setStatus(response);\n      return response;\n    }, [methods.getMethod]);\n    const requestPermission = (0, _react.useCallback)(async () => {\n      const response = await methods.requestMethod(Object.keys(permissionOptions).length > 0 ? permissionOptions : undefined);\n      if (isMounted.current) setStatus(response);\n      return response;\n    }, [methods.requestMethod]);\n    (0, _react.useEffect)(function runMethods() {\n      if (request) requestPermission();\n      if (!request && get) getPermission();\n    }, [get, request, requestPermission, getPermission]);\n\n    // Workaround for unmounting components receiving state updates\n    (0, _react.useEffect)(function didMount() {\n      isMounted.current = true;\n      return () => {\n        isMounted.current = false;\n      };\n    }, []);\n    return [status, requestPermission, getPermission];\n  }\n\n  /**\n   * Create a new permission hook with the permission methods built-in.\n   * This can be used to quickly create specific permission hooks in every module.\n   */\n  function createPermissionHook(methods) {\n    return options => usePermission(methods, options);\n  }\n});","lineCount":62,"map":[[2,2,1,0],[4,2,3,0],[4,14,3,12],[6,2,3,13],[6,6,3,13,"_interopRequireDefault"],[6,28,3,13],[6,31,3,13,"require"],[6,38,3,13],[6,39,3,13,"_dependencyMap"],[6,53,3,13],[7,2,3,13,"Object"],[7,8,3,13],[7,9,3,13,"defineProperty"],[7,23,3,13],[7,24,3,13,"exports"],[7,31,3,13],[8,4,3,13,"value"],[8,9,3,13],[9,2,3,13],[10,2,3,13,"exports"],[10,9,3,13],[10,10,3,13,"createPermissionHook"],[10,30,3,13],[10,33,3,13,"createPermissionHook"],[10,53,3,13],[11,2,3,13],[11,6,3,13,"_objectWithoutPropertiesLoose2"],[11,36,3,13],[11,39,3,13,"_interopRequireDefault"],[11,61,3,13],[11,62,3,13,"require"],[11,69,3,13],[11,70,3,13,"_dependencyMap"],[11,84,3,13],[12,2,5,0],[12,6,5,0,"_react"],[12,12,5,0],[12,15,5,0,"require"],[12,22,5,0],[12,23,5,0,"_dependencyMap"],[12,37,5,0],[13,2,5,65],[13,8,5,65,"_excluded"],[13,17,5,65],[14,2,9,0],[16,2,29,0],[17,0,30,0],[18,0,31,0],[19,0,32,0],[20,0,33,0],[21,2,34,0],[21,11,34,9,"usePermission"],[21,24,34,22,"usePermission"],[21,25,35,2,"methods"],[21,32,35,53],[21,34,36,2,"options"],[21,41,36,42],[21,43,37,93],[22,4,38,2],[22,10,38,8,"isMounted"],[22,19,38,17],[22,22,38,20],[22,26,38,20,"useRef"],[22,39,38,26],[22,41,38,27],[22,45,38,31],[22,46,38,32],[23,4,39,2],[23,10,39,8],[23,11,39,9,"status"],[23,17,39,15],[23,19,39,17,"setStatus"],[23,28,39,26],[23,29,39,27],[23,32,39,30],[23,36,39,30,"useState"],[23,51,39,38],[23,53,39,58],[23,57,39,62],[23,58,39,63],[24,4,40,2],[24,10,40,2,"_ref"],[24,14,40,2],[24,17,40,64,"options"],[24,24,40,71],[24,28,40,75],[24,29,40,76],[24,30,40,77],[25,6,40,8],[26,8,40,10,"get"],[26,11,40,13],[26,14,40,16],[26,18,40,20],[27,8,40,22,"request"],[27,15,40,29],[27,18,40,32],[28,6,40,60],[28,7,40,61],[28,10,40,61,"_ref"],[28,14,40,61],[29,6,40,42,"permissionOptions"],[29,23,40,59],[29,30,40,59,"_objectWithoutPropertiesLoose2"],[29,60,40,59],[29,61,40,59,"default"],[29,68,40,59],[29,70,40,59,"_ref"],[29,74,40,59],[29,76,40,59,"_excluded"],[29,85,40,59],[30,4,42,2],[30,10,42,8,"getPermission"],[30,23,42,21],[30,26,42,24],[30,30,42,24,"useCallback"],[30,48,42,35],[30,50,42,36],[30,62,42,48],[31,6,43,4],[31,12,43,10,"response"],[31,20,43,18],[31,23,43,21],[31,29,43,27,"methods"],[31,36,43,34],[31,37,43,35,"getMethod"],[31,46,43,44],[31,47,44,6,"Object"],[31,53,44,12],[31,54,44,13,"keys"],[31,58,44,17],[31,59,44,18,"permissionOptions"],[31,76,44,35],[31,77,44,36],[31,78,44,37,"length"],[31,84,44,43],[31,87,44,46],[31,88,44,47],[31,91,44,51,"permissionOptions"],[31,108,44,68],[31,111,44,83,"undefined"],[31,120,45,4],[31,121,45,5],[32,6,46,4],[32,10,46,8,"isMounted"],[32,19,46,17],[32,20,46,18,"current"],[32,27,46,25],[32,29,46,27,"setStatus"],[32,38,46,36],[32,39,46,37,"response"],[32,47,46,45],[32,48,46,46],[33,6,47,4],[33,13,47,11,"response"],[33,21,47,19],[34,4,48,2],[34,5,48,3],[34,7,48,5],[34,8,48,6,"methods"],[34,15,48,13],[34,16,48,14,"getMethod"],[34,25,48,23],[34,26,48,24],[34,27,48,25],[35,4,50,2],[35,10,50,8,"requestPermission"],[35,27,50,25],[35,30,50,28],[35,34,50,28,"useCallback"],[35,52,50,39],[35,54,50,40],[35,66,50,52],[36,6,51,4],[36,12,51,10,"response"],[36,20,51,18],[36,23,51,21],[36,29,51,27,"methods"],[36,36,51,34],[36,37,51,35,"requestMethod"],[36,50,51,48],[36,51,52,6,"Object"],[36,57,52,12],[36,58,52,13,"keys"],[36,62,52,17],[36,63,52,18,"permissionOptions"],[36,80,52,35],[36,81,52,36],[36,82,52,37,"length"],[36,88,52,43],[36,91,52,46],[36,92,52,47],[36,95,52,51,"permissionOptions"],[36,112,52,68],[36,115,52,83,"undefined"],[36,124,53,4],[36,125,53,5],[37,6,54,4],[37,10,54,8,"isMounted"],[37,19,54,17],[37,20,54,18,"current"],[37,27,54,25],[37,29,54,27,"setStatus"],[37,38,54,36],[37,39,54,37,"response"],[37,47,54,45],[37,48,54,46],[38,6,55,4],[38,13,55,11,"response"],[38,21,55,19],[39,4,56,2],[39,5,56,3],[39,7,56,5],[39,8,56,6,"methods"],[39,15,56,13],[39,16,56,14,"requestMethod"],[39,29,56,27],[39,30,56,28],[39,31,56,29],[40,4,58,2],[40,8,58,2,"useEffect"],[40,24,58,11],[40,26,59,4],[40,35,59,13,"runMethods"],[40,45,59,23,"runMethods"],[40,46,59,23],[40,48,59,26],[41,6,60,6],[41,10,60,10,"request"],[41,17,60,17],[41,19,60,19,"requestPermission"],[41,36,60,36],[41,37,60,37],[41,38,60,38],[42,6,61,6],[42,10,61,10],[42,11,61,11,"request"],[42,18,61,18],[42,22,61,22,"get"],[42,25,61,25],[42,27,61,27,"getPermission"],[42,40,61,40],[42,41,61,41],[42,42,61,42],[43,4,62,4],[43,5,62,5],[43,7,63,4],[43,8,63,5,"get"],[43,11,63,8],[43,13,63,10,"request"],[43,20,63,17],[43,22,63,19,"requestPermission"],[43,39,63,36],[43,41,63,38,"getPermission"],[43,54,63,51],[43,55,64,2],[43,56,64,3],[45,4,66,2],[46,4,67,2],[46,8,67,2,"useEffect"],[46,24,67,11],[46,26,67,12],[46,35,67,21,"didMount"],[46,43,67,29,"didMount"],[46,44,67,29],[46,46,67,32],[47,6,68,4,"isMounted"],[47,15,68,13],[47,16,68,14,"current"],[47,23,68,21],[47,26,68,24],[47,30,68,28],[48,6,69,4],[48,13,69,11],[48,19,69,17],[49,8,70,6,"isMounted"],[49,17,70,15],[49,18,70,16,"current"],[49,25,70,23],[49,28,70,26],[49,33,70,31],[50,6,71,4],[50,7,71,5],[51,4,72,2],[51,5,72,3],[51,7,72,5],[51,9,72,7],[51,10,72,8],[52,4,74,2],[52,11,74,9],[52,12,74,10,"status"],[52,18,74,16],[52,20,74,18,"requestPermission"],[52,37,74,35],[52,39,74,37,"getPermission"],[52,52,74,50],[52,53,74,51],[53,2,75,0],[55,2,77,0],[56,0,78,0],[57,0,79,0],[58,0,80,0],[59,2,81,7],[59,11,81,16,"createPermissionHook"],[59,31,81,36,"createPermissionHook"],[59,32,82,2,"methods"],[59,39,82,53],[59,41,83,2],[60,4,84,2],[60,11,84,10,"options"],[60,18,84,50],[60,22,85,4,"usePermission"],[60,35,85,17],[60,36,85,39,"methods"],[60,43,85,46],[60,45,85,48,"options"],[60,52,85,55],[60,53,85,56],[61,2,86,0],[62,0,86,1],[62,3]],"functionMap":{"names":["<global>","usePermission","getPermission","requestPermission","runMethods","didMount","<anonymous>","createPermissionHook"],"mappings":"AAA;ACiC;oCCQ;GDM;wCEE;GFM;IGG;KHG;YIK;WCE;KDE;GJC;CDG;OOM;SDG;wDCC;CPC"}},"type":"js/module"}]}